<!DOCTYPE html>
<html>
<head>
<title>API.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* a11y-light theme */
/* Based on the Tomorrow Night Eighties theme: https://github.com/isagalaev/highlight.js/blob/master/src/styles/tomorrow-night-eighties.css */
/* @author: ericwbailey */

/* Comment */
.hljs-comment,
.hljs-quote {
  color: #696969;
}

/* Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
  color: #d91e18;
}

/* Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
  color: #aa5d00;
}

/* Yellow */
.hljs-attribute {
  color: #aa5d00;
}

/* Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
  color: #008000;
}

/* Blue */
.hljs-title,
.hljs-section {
  color: #007faa;
}

/* Purple */
.hljs-keyword,
.hljs-selector-tag {
  color: #7928a1;
}

.hljs {
  display: block;
  overflow-x: auto;
  background: #fefefe;
  color: #545454;
  padding: 0.5em;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

@media screen and (-ms-high-contrast: active) {
  .hljs-addition,
  .hljs-attribute,
  .hljs-built_in,
  .hljs-builtin-name,
  .hljs-bullet,
  .hljs-comment,
  .hljs-link,
  .hljs-literal,
  .hljs-meta,
  .hljs-number,
  .hljs-params,
  .hljs-string,
  .hljs-symbol,
  .hljs-type,
  .hljs-quote {
        color: highlight;
    }

    .hljs-keyword,
    .hljs-selector-tag {
        font-weight: bold;
    }
}

</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D1%8F-%D0%BA-api">Документация к API</h1>
<h2 id="%D0%BE%D0%B1%D1%89%D0%B8%D0%B5-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0---get-apiinit">Общие данные блога - <code>GET /api/init/</code></h2>
<p>Метод возвращает общую информацию о блоге: название блога и подзаголовок для размещения в хэдере сайта, а также номер телефона, e-mail и информацию об авторских правах для размещения в футере.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"title"</span>: <span class="hljs-string">"DevPub"</span>,
	<span class="hljs-attr">"subtitle"</span>: <span class="hljs-string">"Рассказы разработчиков"</span>,
	<span class="hljs-attr">"phone"</span>: <span class="hljs-string">"+7 903 666-44-55"</span>,
	<span class="hljs-attr">"email"</span>: <span class="hljs-string">"mail@mail.ru"</span>,
	<span class="hljs-attr">"copyright"</span>: <span class="hljs-string">"Дмитрий Сергеев"</span>,
	<span class="hljs-attr">"copyrightFrom"</span>: <span class="hljs-string">"2005"</span>
}
</div></code></pre>
<h2 id="%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D0%B2---get-apipost">Список постов - <code>GET /api/post/</code></h2>
<p>Метод получения постов со всей сопутствующей информацией для главной страницы и подразделов &quot;Новые&quot;, &quot;Самые обсуждаемые&quot;, &quot;Лучшие&quot; и &quot;Старые&quot;. Метод выводит посты, отсортированные в соответствии с параметром <code>mode</code>
<em>(см. ниже более детальное описание каждого значения этого параметра)</em>. Первый раз <strong>frontend</strong> запрашивает список постов, начиная с нулевого (<code>offset</code>), в количестве <code>limit</code>, далее - в зависимости от параметра <code>count</code>, который был возвращён сервером.</p>
<p>Параметр <code>count</code> всегда содержит общее количество постов, которое доступно по данному запросу с учётом всех фильтров, параметров доступности, кроме <code>offset</code> и <code>limit</code>. Один запрос с разными <code>offset</code> и <code>limit</code> должен выводить одно и то же значение <code>count</code>.</p>
<p>Массив <code>posts</code> - только то количество, которое было передано при запросе в параметре <code>limit</code>, или меньшее, если это последняя порция постов.</p>
<p>Должны выводиться только активные (поле <code>is_active</code> в таблице <code>posts</code> равно 1), утверждённые модератором (поле <code>moderation_status</code> равно <code>ACCEPTED</code>) посты с датой публикации не позднее текущего момента (движок должен позволять откладывать публикацию).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>offset</code> - сдвиг от 0 для постраничного вывода</li>
<li><code>limit</code> - количество постов, которое надо вывести</li>
<li><code>mode</code> - режим вывода (сортировка):</li>
<li><code>recent</code> - сортировать по дате публикации, выводить сначала новые</li>
<li><code>popular</code> - сортировать по убыванию количества комментариев</li>
<li><code>best</code> - сортировать по убыванию количества лайков</li>
<li><code>early</code> - сортировать по дате публикации, выводить сначала старые</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"count"</span>: <span class="hljs-number">390</span>,
	<span class="hljs-attr">"posts"</span>: [
		{
			<span class="hljs-attr">"id"</span>: <span class="hljs-number">345</span>,
			<span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>, 
			<span class="hljs-attr">"user"</span>:
				{
				<span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
				<span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
				},
			<span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
			<span class="hljs-attr">"announce"</span>: <span class="hljs-string">"Текст анонса поста без HTML-тэгов"</span>,
			<span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
			<span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
			<span class="hljs-attr">"commentCount"</span>: <span class="hljs-number">15</span>,
			<span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>
		},
		{...}
	]
}
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>если не найдено постов по запросу, то вернуть:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"count"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"posts"</span>:[]
}
</div></code></pre>
<h2 id="%D0%BF%D0%BE%D0%B8%D1%81%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D0%B2---get-apipostsearch">Поиск постов - <code>GET /api/post/search/</code></h2>
<p>Метод возвращает посты, соответствующие поисковому запросу - строке <code>query</code>. В случае, если запрос пустой, метод должен выводить все посты.</p>
<p>Параметр <code>count</code> содержит общее количество постов, которые найдены по переданному в параметре <code>query</code> запросу. Массив <code>posts</code> - только то количество, которое было передано при запросе в параметре <code>limit</code>, или меньшее, если это последняя порция постов.</p>
<p>Должны выводиться только активные (поле <code>is_active</code> в таблице <code>posts</code> равно 1), утверждённые модератором (поле <code>moderation_status</code> равно <code>ACCEPTED</code>) посты с датой публикации не позднее текущего момента (движок должен позволять откладывать публикацию).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>offset</code> - сдвиг от 0 для постраничного вывода</li>
<li><code>limit</code> - количество постов, которое надо вывести</li>
<li><code>query</code> - поисковый запрос</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div> {
 	<span class="hljs-attr">"count"</span>: <span class="hljs-number">20</span>,
 	<span class="hljs-attr">"posts"</span>: [
 		{
 			<span class="hljs-attr">"id"</span>: <span class="hljs-number">345</span>,
 			<span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,
 			<span class="hljs-attr">"user"</span>:
 				{
 				<span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
 				<span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
 				},
 			<span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
 			<span class="hljs-attr">"announce"</span>: <span class="hljs-string">"Текст анонса поста без HTML-тэгов"</span>,
 			<span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
 			<span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
 			<span class="hljs-attr">"commentCount"</span>: <span class="hljs-number">15</span>,
 			<span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>
 		},
 		{...}
 	]
 }
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>если не найдено постов по запросу, то вернуть:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"count"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"posts"</span>:[]
}
</div></code></pre>
<h2 id="%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%B7%D0%B0-%D1%83%D0%BA%D0%B0%D0%B7%D0%B0%D0%BD%D0%BD%D1%83%D1%8E-%D0%B4%D0%B0%D1%82%D1%83---get-apipostbydate">Список постов за указанную дату - <code>GET /api/post/byDate</code></h2>
<p>Выводит посты за указанную дату, переданную в запросе в параметре <code>date</code>. Параметры <code>offset</code> и <code>limit</code>, а также выдаваемое значение <code>count</code> аналогичны таковым в методе <code>GET /api/post</code>, выдающем список постов.</p>
<p>Должны выводиться только активные (поле <code>is_active</code> в таблице <code>posts</code> равно 1), утверждённые модератором (поле <code>moderation_status</code> равно <code>ACCEPTED</code>) посты с датой публикации не позднее текущего момента (движок должен позволять откладывать публикацию).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>offset</code> - сдвиг от 0 для постраничного вывода</li>
<li><code>limit</code> - количество постов, которое надо вывести</li>
<li><code>date</code> - дата в формате &quot;2019-10-15&quot;</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
<span class="hljs-attr">"count"</span>: <span class="hljs-number">2</span>,
<span class="hljs-attr">"posts"</span>: [
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">345</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,  
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
    <span class="hljs-attr">"announce"</span>: <span class="hljs-string">"Текст анонса (часть основного текста) поста без HTML-тэгов"</span>,
    <span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
    <span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">"commentCount"</span>: <span class="hljs-number">15</span>,
    <span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>,
    <span class="hljs-attr">"user"</span>:
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
      }
  },
  {...}
	]
}
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>если не найдено постов по запросу, то вернуть:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"count"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"posts"</span>:[]
}
</div></code></pre>
<h2 id="%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BF%D0%BE-%D1%82%D1%8D%D0%B3%D1%83---get-apipostbytag">Список постов по тэгу - <code>GET /api/post/byTag</code></h2>
<p>Метод выводит список постов, привязанных к тэгу, который был передан методу в качестве параметра <code>tag</code>.</p>
<p>Параметры <code>offset</code> и <code>limit</code>, а также выдаваемое значение <code>count</code> аналогичны таковым в методе <code>GET /api/post</code>, выдающем список постов.</p>
<p>Должны выводиться только активные (поле <code>is_active</code> в таблице <code>posts</code> равно 1), утверждённые модератором (поле <code>moderation_status</code> равно <code>ACCEPTED</code>) посты с датой публикации не позднее текущего момента (движок должен позволять откладывать публикацию).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>offset</code> - сдвиг от 0 для постраничного вывода</li>
<li><code>limit</code> - количество постов, которое надо вывести</li>
<li><code>tag</code> - тэг, по которому нужно вывести все посты</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
<span class="hljs-attr">"count"</span>: <span class="hljs-number">2</span>,
<span class="hljs-attr">"posts"</span>: [
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">345</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,  
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
    <span class="hljs-attr">"announce"</span>: <span class="hljs-string">"Текст анонса (часть основного текста) поста без HTML-тэгов"</span>,
    <span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
    <span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">"commentCount"</span>: <span class="hljs-number">15</span>,
    <span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>,
    <span class="hljs-attr">"user"</span>:
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
      }
  },
  {...}
	]
}
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>если не найдено постов по запросу, то вернуть:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"count"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"posts"</span>:[]
}
</div></code></pre>
<h2 id="%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%BC%D0%BE%D0%B4%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8E---get-apipostmoderation">Список постов на модерацию - <code>GET /api/post/moderation</code></h2>
<p>Метод выводит все посты, которые требуют модерационных действий (которые нужно утвердить или отклонить) или над которыми мною были совершены модерационные действия: которые я отклонил или утвердил (это определяется полями <code>moderation_status</code> и <code>moderator_id</code> в таблице <code>posts</code> базы данных).</p>
<p>Параметры <code>offset</code> и <code>limit</code>, а также выдаваемое значение <code>count</code> аналогичны таковым в методе <code>GET /api/post</code>, выдающем список постов.</p>
<p>Должны выводиться только активные (поле <code>is_active</code> в таблице <code>posts</code> равно 1) посты. Скрытые посты - это черновики, которые пользователь создал, но ещё не решил опубликовать.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>offset</code> - сдвиг от 0 для постраничного вывода</li>
<li><code>limit</code> - количество постов, которое надо вывести</li>
<li><code>status</code> - статус модерации:
<ul>
<li><code>new</code> - новые, необходима модерация</li>
<li><code>declined</code> - отклонённые мной</li>
<li><code>accepted</code> - утверждённые мной</li>
</ul>
</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
<span class="hljs-attr">"count"</span>: <span class="hljs-number">3</span>,
<span class="hljs-attr">"posts"</span>: [
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">31</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,  
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
    <span class="hljs-attr">"announce"</span>: <span class="hljs-string">"Текст анонса (часть основного текста) поста без HTML-тэгов (HTML тэги необходимо удалить из текста анонса)"</span>,
    <span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
    <span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">"commentCount"</span>: <span class="hljs-number">15</span>,
    <span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>,
    <span class="hljs-attr">"user"</span>:
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
      }
  },
  {...}
	]
}
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>если не найдено постов по запросу, то вернуть:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"count"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"posts"</span>:[]
}
</div></code></pre>
<h2 id="%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA-%D0%BC%D0%BE%D0%B8%D1%85-%D0%BF%D0%BE%D1%81%D1%82%D0%BE%D0%B2---get-apipostmy">Список моих постов - <code>GET /api/post/my</code></h2>
<p>Метод выводит только те посты, которые создал я (в соответствии с полем <code>user_id</code> в таблице <code>posts</code> базы данных). Возможны 4 типа вывода (см. ниже описания значений параметра <code>status</code>).</p>
<p>Параметры <code>offset</code> и <code>limit</code>, а также выдаваемое значение <code>count</code> аналогичны таковым в методе <code>GET /api/post</code>, выдающем список постов.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>offset</code> - сдвиг от 0 для постраничного вывода</li>
<li><code>limit</code> - количество постов, которое надо вывести</li>
<li><code>status</code> - статус модерации:</li>
<li><code>inactive</code> - скрытые, ещё не опубликованы (<code>is_active</code> = 0)</li>
<li><code>pending</code> - активные, ожидают утверждения модератором (<code>is_active</code> = 1, <code>moderation_status</code> = <code>NEW</code>)</li>
<li><code>declined</code> - отклонённые по итогам модерации (<code>is_active</code> = 1, <code>moderation_status</code> = <code>DECLINED</code>)</li>
<li><code>published</code> - опубликованные по итогам модерации (<code>is_active</code> = 1, <code>moderation_status</code> = <code>ACCEPTED</code>)</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
<span class="hljs-attr">"count"</span>: <span class="hljs-number">3</span>,
<span class="hljs-attr">"posts"</span>: [
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">31</span>,
    <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,  
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
    <span class="hljs-attr">"announce"</span>: <span class="hljs-string">"Текст анонса (часть основного текста) поста без HTML-тэгов (HTML тэги необходимо удалить из текста анонса)"</span>,
    <span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
    <span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">"commentCount"</span>: <span class="hljs-number">15</span>,
    <span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>,
    <span class="hljs-attr">"user"</span>:
      {
        <span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
      }
  },
  {...}
	]
}
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>если не найдено постов по запросу, то вернуть:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"count"</span>:<span class="hljs-number">0</span>,
  <span class="hljs-attr">"posts"</span>:[]
}
</div></code></pre>
<h2 id="%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D1%81%D1%82%D0%B0---get-apipostid">Получение поста - <code>GET /api/post/{ID}</code></h2>
<p>Метод выводит данные конкретного поста для отображения на странице поста, в том числе, список комментариев и тэгов, привязанных к данному посту. Выводит пост в любом случае, если пост активен (параметр <code>is_active</code> в базе данных равен 1), принят модератором (параметр <code>moderation_status</code> равен <code>ACCEPTED</code>) и время его публикации (поле <code>timestamp</code>) равно текущему времени или меньше его формата UTC.</p>
<p>При успешном запросе необходимо увеличивать количество просмотров поста на 1 (поле <code>view_count</code>), кроме случаев:</p>
<ul>
<li>Если модератор авторизован, то не считаем его просмотры вообще</li>
<li>Если автор авторизован, то не считаем просмотры своих же публикаций</li>
</ul>
<p>Параметр <code>active</code> в ответе используется админ частью фронта, должно быть значение <code>true</code> если пост опубликован и <code>false</code> если скрыт (при этом модераторы и автор поста будет его видеть)</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
 <span class="hljs-attr">"id"</span>: <span class="hljs-number">34</span>,
 <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,
 <span class="hljs-attr">"active"</span>: <span class="hljs-literal">true</span>,
 <span class="hljs-attr">"user"</span>:
   {
   	<span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
   	<span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>
   },
 <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок поста"</span>,
 <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Текст поста в формате HTML"</span>,
 <span class="hljs-attr">"likeCount"</span>: <span class="hljs-number">36</span>,
 <span class="hljs-attr">"dislikeCount"</span>: <span class="hljs-number">3</span>,
 <span class="hljs-attr">"viewCount"</span>: <span class="hljs-number">55</span>,
 <span class="hljs-attr">"comments"</span>: [
   {
     <span class="hljs-attr">"id"</span>: <span class="hljs-number">776</span>,
     <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1592338706</span>,
     <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Текст комментария в формате HTML"</span>,
     <span class="hljs-attr">"user"</span>:
       {
         <span class="hljs-attr">"id"</span>: <span class="hljs-number">88</span>,
         <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>,
         <span class="hljs-attr">"photo"</span>: <span class="hljs-string">"/avatars/ab/cd/ef/52461.jpg"</span>
       }
   },
   {...}
 ],
 <span class="hljs-attr">"tags"</span>: [<span class="hljs-string">"Статьи"</span>, <span class="hljs-string">"Java"</span>]
}
</div></code></pre>
<p><code>timestamp</code> - время в UTC</p>
<p><strong>Если пост не найден:</strong>
вернуть 404 статус код (Документ на найден)</p>
<h2 id="%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D1%81%D1%82%D0%B0---post-apipost">Добавление поста - <code>POST /api/post</code></h2>
<p>Метод отправляет данные поста, которые пользователь ввёл в форму публикации. В случае, если заголовок или текст поста не установлены и/или слишком короткие (короче 3 и 50 символов соответственно), метод должен выводить ошибку и не добавлять пост.</p>
<p><strong>Время публикации поста также должно проверяться:</strong> в случае, если время публикации раньше текущего времени, оно должно автоматически становиться текущим. Если позже текущего - необходимо устанавливать введенное значение.</p>
<p>Пост должен сохраняться со статусом модерации <code>NEW</code>.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Параметры запроса:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"timestamp"</span>:<span class="hljs-number">1592338706</span>,
  <span class="hljs-attr">"active"</span>:<span class="hljs-number">1</span>,
  <span class="hljs-attr">"title"</span>:<span class="hljs-string">"заголовок"</span>,
  <span class="hljs-attr">"tags"</span>:[<span class="hljs-string">"java"</span>,<span class="hljs-string">"spring"</span>],
  <span class="hljs-attr">"text"</span>:<span class="hljs-string">"Текст поста включащий &lt;b&gt;тэги форматирования&lt;/b&gt;"</span>
}
</div></code></pre>
<ul>
<li><code>timestamp</code> - дата и время публикации в формате UTC</li>
<li><code>active</code> - 1 или 0, открыт пост или скрыт</li>
<li><code>title</code> - заголовок поста</li>
<li><code>text</code> - текст поста в формате HTML</li>
<li><code>tags</code> - тэги через запятую (при вводе на frontend тэг добавляется при нажатии Enter).</li>
</ul>
<p><strong>✅ Формат успешного ответа:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<p><strong>❌ Формат ответа в случае ошибки или нескольких ошибок:</strong>
Status code: 200</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"errors"</span>: {
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок не установлен"</span>,
    <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Текст публикации слишком короткий"</span>
  }
}
</div></code></pre>
<h2 id="%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9---post-apiimage">Загрузка изображений - <code>POST /api/image</code></h2>
<p>Метод загружает на сервер изображение в папку <code>upload</code> и три случайные подпапки. Имена подпапок и изображения можно формировать из случайного хэша, разделяя его на части.</p>
<p>Метод возвращает путь до изображения. Этот путь затем будет вставлен в HTML-код публикации, в которую вставлено изображение.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Запрос:</strong>
<code>Content-Type: multipart/form-data</code></p>
<ul>
<li><code>image</code> - файл изображения</li>
</ul>
<p><strong>✅ Формат успешного ответа:</strong></p>
<pre class="hljs"><code><div>/upload/ab/cd/ef/52461.jpg
</div></code></pre>
<p><strong>❌ Формат ответа в случае ошибки:</strong>
Status Code: 400, &quot;Bad Request&quot;</p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"errors"</span>: {
    <span class="hljs-attr">"image"</span>: <span class="hljs-string">"Размер файла превышает допустимый размер"</span>
  }
}
</div></code></pre>
<p>также возвращать ошибку, если отправлен файл не формата изображение jpg, png.</p>
<h2 id="%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D1%81%D1%82%D0%B0---put-apipostid">Редактирование поста - <code>PUT /api/post/{ID}</code></h2>
<p>Метод изменяет данные поста с идентификатором ID на те, которые пользователь ввёл в форму публикации. В случае, если заголовок или текст поста не установлены и/или слишком короткие (короче 3 и 50 символов соответственно), метод должен выводить ошибку и не изменять пост.</p>
<p>Время публикации поста также должно проверяться: в случае, если время публикации раньше текущего времени, оно должно автоматически становиться текущим. Если позже текущего - необходимо устанавливать указанное значение.</p>
<p>Пост должен сохраняться со статусом модерации <code>NEW</code>, если его изменил автор, и статус модерации не должен изменяться, если его изменил модератор.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Параметры запроса:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"timestamp"</span>:<span class="hljs-number">1592338706</span>,
  <span class="hljs-attr">"active"</span>:<span class="hljs-number">1</span>,
  <span class="hljs-attr">"title"</span>:<span class="hljs-string">"заголовок"</span>,
  <span class="hljs-attr">"tags"</span>:[<span class="hljs-string">"java"</span>,<span class="hljs-string">"spring"</span>],
  <span class="hljs-attr">"text"</span>:<span class="hljs-string">"Текст поста включащий &lt;b&gt;тэги форматирования&lt;/b&gt;"</span>
}
</div></code></pre>
<ul>
<li><code>timestamp</code> - дата и время публикации в формате UTC</li>
<li><code>active</code> - 1 или 0, открыть пост или скрыть</li>
<li><code>title</code> - заголовок поста</li>
<li><code>text</code> - текст поста в формате HTML</li>
<li><code>tags</code> - тэги через запятую (при вводе на frontend тэг должен добавляться при нажатии Enter или вводе запятой).</li>
</ul>
<p><strong>✅ Формат успешного ответа:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<p><strong>❌ Формат ответа в случае ошибки или нескольких ошибок:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"errors"</span>: {
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Заголовок слишком короткий"</span>,
    <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Текст публикации слишком короткий"</span>
  }
}
</div></code></pre>
<h2 id="%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B0-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D1%8F-%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D1%83---post-apicomment">Отправка комментария к посту - <code>POST /api/comment/</code></h2>
<p>Метод добавляет комментарий к посту. Должны проверяться все три параметра. Если параметры parent_id и/или post_id неверные (соответствующие комментарий и/или пост не существуют), должна выдаваться ошибка 400 (см. ниже раздел “Обработка ошибок”). В случае, если текст комментария отсутствует (пустой) или слишком короткий, необходимо выдавать ошибку в JSON-формате.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Пример запроса на добавление комментария к самому посту:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"parent_id"</span>:<span class="hljs-string">""</span>,
  <span class="hljs-attr">"post_id"</span>:<span class="hljs-number">21</span>,
  <span class="hljs-attr">"text"</span>:<span class="hljs-string">"привет, какой &lt;span style="</span>font-weight: bold;<span class="hljs-string">"&gt;интересный&lt;/span&gt; &lt;span style="</span>font-style: italic;<span class="hljs-string">"&gt;пост!&lt;/span&gt;"</span>
}
</div></code></pre>
<p><strong>Пример запроса на добавление комментария к другому комментарию:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"parent_id"</span>:<span class="hljs-number">31</span>,
  <span class="hljs-attr">"post_id"</span>:<span class="hljs-number">21</span>,
  <span class="hljs-attr">"text"</span>:<span class="hljs-string">"текст комментария"</span>
}
</div></code></pre>
<ul>
<li><code>parent_id</code> - ID комментария, на который пишется ответ</li>
<li><code>post_id</code> - ID поста, к которому пишется ответ</li>
<li><code>text</code> - текст комментария (формат HTML)</li>
</ul>
<p><strong>✅ Формат успешного ответа:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"id"</span>: <span class="hljs-number">345</span>
}
</div></code></pre>
<p><strong>❌ Формат ответа в случае ошибки или нескольких ошибок:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">"errors"</span>: {
		<span class="hljs-attr">"text"</span>: <span class="hljs-string">"Текст комментария не задан или слишком короткий"</span>
	}
}
</div></code></pre>
<h2 id="%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B0-%D1%82%D1%8D%D0%B3%D0%BE%D0%B2---get-apitag">Получение списка тэгов - <code>GET /api/tag/</code></h2>
<p>Метод выдаёт список тэгов, начинающихся на строку, заданную в параметре <code>query</code>. В случае, если она не задана, выводятся все тэги. В параметре <code>weight</code> должен быть указан относительный нормированный вес тэга от 0 до 1, соответствующий частоте его встречаемости. Значение 1 означает, что этот тэг встречается чаще всего. Пример значений <code>weight</code> для разных частот встречаемости:</p>
<table>
<thead>
<tr>
<th>Тэг</th>
<th style="text-align:center">Кол-во публикаций с данным тэгом</th>
<th style="text-align:center">Общее кол-во публикаций на сайте</th>
<th style="text-align:center">Вес</th>
<th style="text-align:center">Нормированный вес</th>
</tr>
</thead>
<tbody>
<tr>
<td>Java</td>
<td style="text-align:center">10</td>
<td style="text-align:center">20</td>
<td style="text-align:center">0,5</td>
<td style="text-align:center">1,0</td>
</tr>
<tr>
<td>Spring</td>
<td style="text-align:center">10</td>
<td style="text-align:center">20</td>
<td style="text-align:center">0,5</td>
<td style="text-align:center">1,0</td>
</tr>
<tr>
<td>Hibernate</td>
<td style="text-align:center">5</td>
<td style="text-align:center">20</td>
<td style="text-align:center">0,25</td>
<td style="text-align:center">0,5</td>
</tr>
<tr>
<td>Hadoop</td>
<td style="text-align:center">1</td>
<td style="text-align:center">20</td>
<td style="text-align:center">0,05</td>
<td style="text-align:center">0,1</td>
</tr>
</tbody>
</table>
<p>В таблице приведено количество активных публикаций, утверждённых модератором со временем публикации, не превышающем текущее время - то есть количество, соответствующее реальному количеству публикаций на сайте, которые видит любой неавторизованный посетитель сайта.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>query</code> - часть тэга или тэг (например &quot;Java&quot;, &quot;PHP&quot;), может быть не задан или быть пустым (в этом случае выводятся все тэги).</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"tags"</span>: 
  [
   {
     <span class="hljs-attr">"name"</span>: <span class="hljs-string">"PHP"</span>,
     <span class="hljs-attr">"weight"</span>: <span class="hljs-number">1</span>
   },
   {
     <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Python"</span>,
     <span class="hljs-attr">"weight"</span>: <span class="hljs-number">0.33</span>
   }
  ]
}
</div></code></pre>
<h2 id="%D0%BC%D0%BE%D0%B4%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D0%BF%D0%BE%D1%81%D1%82%D0%B0---post-apimoderation">Модерация поста - <code>POST /api/moderation</code></h2>
<p>Метод фиксирует действие модератора по посту: его утверждение или отклонение. Кроме того, фиксируется <code>moderator_id</code> - идентификатор пользователя, который отмодерировал пост.</p>
<p>Посты могут модерировать только пользователи с <code>is_moderator = 1</code></p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"post_id"</span>:<span class="hljs-number">31</span>,
  <span class="hljs-attr">"decision"</span>:<span class="hljs-string">"accept"</span>
}
</div></code></pre>
<ul>
<li><code>post_id</code> - идентификатор поста</li>
<li><code>decision</code> - решение по посту: <code>accept</code> или <code>decline</code>.</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>:<span class="hljs-literal">true</span>
}
</div></code></pre>
<p>если по какой-то причине изменение статуса поста не удалось изменить, то возвращать <code>false</code></p>
<h2 id="%D0%BA%D0%B0%D0%BB%D0%B5%D0%BD%D0%B4%D0%B0%D1%80%D1%8C-%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B0-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B9---get-apicalendar">Календарь (количества публикаций) - <code>GET /api/calendar/</code></h2>
<p>Метод выводит количества публикаций на каждую дату переданного в параметре <code>year</code> года или текущего года, если параметр <code>year</code> не задан.
В параметре <code>years</code> всегда возвращается список всех годов, за которые была хотя бы одна публикация, в порядке возврастания.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Параметры:</strong></p>
<ul>
<li><code>year</code> - год в виде четырёхзначного числа, если не передан - возвращать за текущий год</li>
</ul>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"years"</span>: [<span class="hljs-number">2017</span>, <span class="hljs-number">2018</span>, <span class="hljs-number">2019</span>, <span class="hljs-number">2020</span>],
	<span class="hljs-attr">"posts"</span>: {
		<span class="hljs-attr">"2019-12-17"</span>: <span class="hljs-number">56</span>,
		<span class="hljs-attr">"2019-12-14"</span>: <span class="hljs-number">11</span>,
		<span class="hljs-attr">"2019-06-17"</span>: <span class="hljs-number">1</span>,
		<span class="hljs-attr">"2020-03-12"</span>: <span class="hljs-number">6</span>
	}
}
</div></code></pre>
<h2 id="%D0%B2%D1%85%D0%BE%D0%B4---post-apiauthlogin">Вход - <code>POST /api/auth/login</code></h2>
<p>Метод проверяет введенные данные и производит авторизацию пользователя, если введенные данные верны. Если пользователь авторизован, идентификатор его сессии должен запоминаться в <code>Map&lt;String, Integer&gt;</code> со значением, равным <code>ID</code> пользователя, которому принадлежит данная сессия.</p>
<p>В параметрах объекта <code>user</code> выводятся имя пользователя, ссылка на его аватар, e-mail, параметры <code>moderation</code> (если равен true, то у пользователя есть права на модерацию и в выпадающем меню справа будет отображаться пункт меню Модерация с цифрой, указанной в параметре <code>moderationCount</code>) и <code>settings</code> (если равен <code>true</code>, то пользователю доступны настройки блога). Оба параметра - <code>moderation</code> и <code>settings</code> - должны быть равны <code>true</code>, если пользователь является модератором.</p>
<p>Значение <code>moderationCount</code> содержит количество постов необходимых для проверки модераторами. Считаются посты имеющие статус <code>NEW</code> и не проверерны модератором. Если пользователь не модератор возращать 0 в <code>moderationCount</code>.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"e_mail"</span>:<span class="hljs-string">"my@email.com"</span>,
  <span class="hljs-attr">"password"</span>:<span class="hljs-string">"dHdf6dDHfd"</span>
}
</div></code></pre>
<ul>
<li><code>e_mail</code> - e-mail пользователя</li>
<li><code>password</code> - пароль пользователя</li>
</ul>
<p><strong>Форматы ответов:</strong>
<strong>✅ В случае успешной авторизации:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"user"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">576</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>,
    <span class="hljs-attr">"photo"</span>: <span class="hljs-string">"/avatars/ab/cd/ef/52461.jpg"</span>,
    <span class="hljs-attr">"email"</span>: <span class="hljs-string">"my@email.com"</span>,
    <span class="hljs-attr">"moderation"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"moderationCount"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"settings"</span>: <span class="hljs-literal">true</span>
  }
}

</div></code></pre>
<p><strong>❌ Формат ответа в случае ошибки или нескольких ошибок:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>
}
</div></code></pre>
<p>сообщения о причине отказа в авторизации уточнять не требуется, пользователь увидит сообщение: Логин и/или пароль введен(ы) неверно</p>
<h2 id="%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81-%D0%B0%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8---get-apiauthcheck">Статус авторизации - <code>GET /api/auth/check</code></h2>
<p>Метод возвращает информацию о текущем авторизованном пользователе, если он авторизован. Он должен проверять, сохранён ли идентификатор текущей сессии в списке авторизованных.</p>
<p>Значение <code>moderationCount</code> содержит количество постов необходимых для проверки модераторами. Считаются посты имеющие статус <code>NEW</code> и не проверерны модератором. Если пользователь не модератор возращать 0 в <code>moderationCount</code>.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Форматы ответов:</strong>
<strong>✅ В случае, если пользователь авторизован:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"user"</span>: {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">576</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Дмитрий Петров"</span>,
    <span class="hljs-attr">"photo"</span>: <span class="hljs-string">"/avatars/ab/cd/ef/52461.jpg"</span>,
    <span class="hljs-attr">"email"</span>: <span class="hljs-string">"petrov@petroff.ru"</span>,
    <span class="hljs-attr">"moderation"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"moderationCount"</span>: <span class="hljs-number">56</span>,
    <span class="hljs-attr">"settings"</span>: <span class="hljs-literal">true</span>
  }
}

</div></code></pre>
<p><strong>❌ В случае если пользователь неавторизован:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>
}
</div></code></pre>
<h2 id="%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F---post-apiauthrestore">Восстановление пароля - <code>POST /api/auth/restore</code></h2>
<p>Метод проверяет наличие в базе пользователя с указанным e-mail. Если пользователь найден, ему должно отправляться письмо со ссылкой на восстановление пароля следующего вида - <code>/login/change-password/HASH</code>, где <code>HASH</code> - сгенерированный код вида <code>b55ca6ea6cb103c6384cfa366b7ce0bdcac092be26bc0</code> (код должен генерироваться случайным образом и сохраняться в базе данных в поле <code>users.code</code>).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"email"</span>:<span class="hljs-string">"petrov@petroff.ru"</span>
}
</div></code></pre>
<ul>
<li><code>email</code> - e-mail пользователя</li>
</ul>
<p><strong>Форматы ответов:</strong>
<strong>✅ В случае, если логин найден и ссылка восстановления отправлена:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<p><strong>❌ В случае, если логин не найден:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>
}
</div></code></pre>
<h2 id="%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F---post-apiauthpassword">Изменение пароля - <code>POST /api/auth/password</code></h2>
<p>Метод проверяет корректность кода восстановления пароля (параметр <code>code</code>) и корректность кодов капчи: введённый код (параметр <code>captcha</code>) должен совпадать со значением в поле <code>code</code> таблицы <code>captcha_codes</code>, соответствующем пришедшему значению секретного кода (параметр <code>captcha_secret</code> и поле <code>secret_code</code> в таблице базы данных).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"code"</span>:<span class="hljs-string">"b55ca6ea6cb103c6384cfa366b7ce0bdcac092be26bc0"</span>,
  <span class="hljs-attr">"password"</span>:<span class="hljs-string">"123456"</span>,
  <span class="hljs-attr">"captcha"</span>:<span class="hljs-string">"3166"</span>,
  <span class="hljs-attr">"captcha_secret"</span>:<span class="hljs-string">"eqKIqurpZs"</span>
}
</div></code></pre>
<ul>
<li><code>code</code> - код восстановления пароля</li>
<li><code>password</code> - новый пароль</li>
<li><code>captcha</code> - код капчи</li>
<li><code>captcha_secret</code> - секретный код капчи</li>
</ul>
<p><strong>Форматы ответов:</strong></p>
<p><strong>✅ В случае, если все данные отправлены верно:</strong></p>
<pre class="hljs"><code><div>  {
  	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
  }
</div></code></pre>
<p><strong>❌ В случае ошибок <em>(на frontend ошибку повтора пароля необходимо отображать без обращения к серверу)</em>:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">"errors"</span>: {
		<span class="hljs-attr">"code"</span>: <span class="hljs-string">"Ссылка для восстановления пароля устарела.
				&lt;a href=
				\"/auth/restore\"&gt;Запросить ссылку снова&lt;/a&gt;"</span>,
		<span class="hljs-attr">"password"</span>: <span class="hljs-string">"Пароль короче 6-ти символов"</span>,
		<span class="hljs-attr">"captcha"</span>: <span class="hljs-string">"Код с картинки введён неверно"</span>
	}
}
</div></code></pre>
<h2 id="%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F---post-apiauthregister">Регистрация - <code>POST /api/auth/register</code></h2>
<p>Метод создаёт пользователя в базе данных, если введённые данные верны. Если данные неверные - пользователь не создаётся, а метод возвращает соответствующую ошибку.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
	<span class="hljs-attr">"e_mail"</span>:<span class="hljs-string">"konstantin@mail.ru"</span>,
	<span class="hljs-attr">"password"</span>:<span class="hljs-string">"123456"</span>,
	<span class="hljs-attr">"name"</span>:<span class="hljs-string">"Константин"</span>,
	<span class="hljs-attr">"captcha"</span>:<span class="hljs-string">"d34f"</span>,
	<span class="hljs-attr">"captcha_secret"</span>:<span class="hljs-string">"69sdFd67df7Pd9d3"</span>
}

</div></code></pre>
<ul>
<li><code>e_mail</code> - e-mail пользователя</li>
<li><code>name</code> - имя пользователя</li>
<li><code>password</code> - пароль для аккаунта</li>
<li><code>captcha</code> - код капчи</li>
<li><code>captcha_secret</code> - секретный код капчи</li>
</ul>
<p><strong>Форматы ответов:</strong></p>
<p><strong>✅ В случае, если все данные отправлены верно:</strong></p>
<pre class="hljs"><code><div>  {
  	<span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
  }
</div></code></pre>
<p><strong>❌ В случае ошибок <em>(на frontend ошибку повтора пароля необходимо отображать без обращения к серверу)</em>:</strong></p>
<pre class="hljs"><code><div>{
    <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"errors"</span>: {
   	 <span class="hljs-attr">"email"</span>: <span class="hljs-string">"Этот e-mail уже зарегистрирован"</span>,
   	 <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Имя указано неверно"</span>,
   	 <span class="hljs-attr">"password"</span>: <span class="hljs-string">"Пароль короче 6-ти символов"</span>,
   	 <span class="hljs-attr">"captcha"</span>: <span class="hljs-string">"Код с картинки введён неверно"</span>
	}
}
</div></code></pre>
<h2 id="%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BC%D0%BE%D0%B5%D0%B3%D0%BE-%D0%BF%D1%80%D0%BE%D1%84%D0%B8%D0%BB%D1%8F---post-apiprofilemy">Редактирование моего профиля - <code>POST /api/profile/my</code></h2>
<p>Метод обрабатывает информацию, введённую пользователем в форму редактирования своего профиля. Если пароль не введён, его не нужно изменять. Если введён, должна проверяться его корректность: достаточная длина. Одинаковость паролей, введённых в двух полях, проверяется на frontend - на сервере проверка не требуется.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Запрос без изменения пароля и фотографии:</strong>
<code>Content-Type: application/json</code></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"name"</span>:<span class="hljs-string">"Sendel"</span>,
  <span class="hljs-attr">"email"</span>:<span class="hljs-string">"sndl@mail.ru"</span>
}
</div></code></pre>
<p><strong>Запрос c изменением пароля и без изменения фотографии:</strong>
<code>Content-Type: application/json</code></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"name"</span>:<span class="hljs-string">"Sendel"</span>,
  <span class="hljs-attr">"email"</span>:<span class="hljs-string">"sndl@mail.ru"</span>,
  <span class="hljs-attr">"password"</span>:<span class="hljs-string">"123456"</span>
}
</div></code></pre>
<p><strong>Запрос c изменением пароля и фотографии:</strong>
<code>Content-Type: multipart/form-data;</code></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"photo"</span>: &lt;binary_file&gt;,
  <span class="hljs-attr">"name"</span>:<span class="hljs-string">"Sendel"</span>,
  <span class="hljs-attr">"email"</span>:<span class="hljs-string">"sndl@mail.ru"</span>,
  <span class="hljs-attr">"password"</span>:<span class="hljs-string">"123456"</span>,
  <span class="hljs-attr">"removePhoto"</span>:<span class="hljs-number">0</span>
}
</div></code></pre>
<p>⚠️ при загрузке файла изображения фотографии пользователя, необходимо выполнять обрезку и изменение размера фотографии до 36х36 пикселей.</p>
<p><strong>Запрос на удаление фотографии без изменения пароля:</strong>
<code>Content-Type: application/json</code></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"name"</span>:<span class="hljs-string">"Sendel"</span>,
  <span class="hljs-attr">"email"</span>:<span class="hljs-string">"sndl@mail.ru"</span>,
  <span class="hljs-attr">"removePhoto"</span>:<span class="hljs-number">1</span>,
  <span class="hljs-attr">"photo"</span>: <span class="hljs-string">""</span>
}
</div></code></pre>
<ul>
<li><code>photo</code> - файл с фото или пустое значение (если его требуется удалить)</li>
<li><code>removePhoto</code> - параметр, который указывает на то, что фотографию нужно удалить (если значение равно 1)</li>
<li><code>name</code> - новое имя</li>
<li><code>email</code> - новый e-mail</li>
<li><code>password</code> - новый пароль</li>
</ul>
<p><strong>Форматы ответов:</strong></p>
<p><strong>✅ В случае, если все данные отправлены верно:</strong></p>
<pre class="hljs"><code><div>    {
   	 <span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
    }
</div></code></pre>
<p><strong>❌ В случае ошибок <em>(на frontend ошибку повтора пароля необходимо отображать без обращения к серверу)</em>:</strong></p>
<pre class="hljs"><code><div>{
   <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>,
   <span class="hljs-attr">"errors"</span>: {
   	<span class="hljs-attr">"email"</span>: <span class="hljs-string">"Этот e-mail уже зарегистрирован"</span>,
   	<span class="hljs-attr">"photo"</span>: <span class="hljs-string">"Фото слишком большое, нужно не более 5 Мб"</span>,
   	<span class="hljs-attr">"name"</span>: <span class="hljs-string">"Имя указано неверно"</span>,
   	<span class="hljs-attr">"password"</span>: <span class="hljs-string">"Пароль короче 6-ти символов"</span>,
    }
}
</div></code></pre>
<h2 id="%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81-%D0%BA%D0%B0%D0%BF%D1%82%D1%87%D0%B8---get-apiauthcaptcha">Запрос каптчи - <code>GET /api/auth/captcha</code></h2>
<p>Метод генерирует коды капчи, - отображаемый и секретный, - сохраняет их в базу данных (таблица <code>captcha_codes</code>) и возвращает секретный код <code>secret</code> (поле в базе данных<code>secret_code</code>) и изображение размером 100х35 с отображённым на ней основным кодом капчи <code>image</code> (поле базе данных <code>code</code>).</p>
<p>Также метод должен удалять устаревшие капчи из таблицы. Время устаревания должно быть задано в конфигурации приложения (по умолчанию, 1 час).</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"secret"</span>: <span class="hljs-string">"car4y8cryaw84cr89awnrc"</span>,
  <span class="hljs-attr">"image"</span>: <span class="hljs-string">"data:image/png;base64, код_изображения_в_base64"</span>
}
</div></code></pre>
<p><strong>Уточнение работы каптчи:</strong></p>
<p>При запросе <code>GET /api/auth/captcha</code>:</p>
<ul>
<li>бэк генерирует изображение <code>image</code> и без сохранения на диск конвертит в строку base64, обязательно добавляя к результату заголовок <code>data:image/png;base64, </code></li>
<li>генерирует уникальный идентификатор <code>secret</code> и сохраняет его в бд. По этому идентификтору в дальнейшем будет возможность найти в бд правильный текст каптчи.</li>
</ul>
<p>При восстановлении пароля, регистрации и прочих запросов с captcha, после того как пользователя вводит данные каптчи, отправляется форма содержащая текст-расшифровка каптчи пользователем и  <code>secret</code>. Сервис ищем по <code>secret</code> запись о каптче и сравнивает ввод пользователя с <code>code</code> полем записи таблицы <code>captcha_codes</code>. На основе сравнения решается - каптча введена верно или нет.</p>
<p><a href="http://akiraly.github.io/cage/index.html">Вариант генерации captcha Cage - CAptcha GEnerator Java Library</a></p>
<p><a href="https://www.baeldung.com/java-base64-image-string">Как конвертировать изображение в base64</a></p>
<h2 id="%D0%BC%D0%BE%D1%8F-%D1%81%D1%82%D0%B0%D1%82%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B0---get-apistatisticsmy">Моя статистика - <code>GET /api/statistics/my</code></h2>
<p>Метод возвращает статистику постов текущего авторизованного пользователя: общие количества параметров для всех публикаций, у который он является автором и доступные для чтения.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
<span class="hljs-attr">"postsCount"</span>:<span class="hljs-number">7</span>,
<span class="hljs-attr">"likesCount"</span>:<span class="hljs-number">15</span>,
<span class="hljs-attr">"dislikesCount"</span>:<span class="hljs-number">2</span>,
<span class="hljs-attr">"viewsCount"</span>:<span class="hljs-number">58</span>,
<span class="hljs-attr">"firstPublication"</span>:<span class="hljs-number">1590217200</span>
}
</div></code></pre>
<p><code>firstPublication</code> - Время в формате UTC</p>
<h2 id="%D1%81%D1%82%D0%B0%D1%82%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B0-%D0%BF%D0%BE-%D0%B2%D1%81%D0%B5%D0%BC%D1%83-%D0%B1%D0%BB%D0%BE%D0%B3%D1%83---get-apistatisticsall">Статистика по всему блогу - <code>GET /api/statistics/all</code></h2>
<p>Метод выдаёт статистику по всем постам блога. В случае, если публичный показ статистики блога запрещён (см. соответствующий параметр в <code>global_settings</code>) и текущий пользователь не модератор, должна выдаваться ошибка 401 <strong>(см. ниже Обработка ошибок)</strong>.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
<span class="hljs-attr">"postsCount"</span>:<span class="hljs-number">7</span>,
<span class="hljs-attr">"likesCount"</span>:<span class="hljs-number">15</span>,
<span class="hljs-attr">"dislikesCount"</span>:<span class="hljs-number">2</span>,
<span class="hljs-attr">"viewsCount"</span>:<span class="hljs-number">58</span>,
<span class="hljs-attr">"firstPublication"</span>:<span class="hljs-number">1590217200</span>
}
</div></code></pre>
<p><code>firstPublication</code> - Время в формате UTC</p>
<h2 id="%D0%BB%D0%B0%D0%B9%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0---post-apipostlike">Лайк поста - <code>POST /api/post/like</code></h2>
<p>Метод сохраняет в таблицу <code>post_votes</code> лайк текущего авторизованного пользователя. В случае повторного лайка возвращает <code>{result: false}</code>.</p>
<p>Если до этого этот же пользователь поставил на этот же пост дизлайк, этот дизлайк должен быть заменен на лайк в базе данных.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"post_id"</span>: <span class="hljs-number">151</span>
}
</div></code></pre>
<ul>
<li><code>post_id</code> - id поста которому ставим лайк</li>
</ul>
<p><strong>✅ Формат ответа в случае, если лайк произошёл:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<p><strong>❌ Формат ответа в случае, если лайк не произошёл:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>
}
</div></code></pre>
<h2 id="%D0%B4%D0%B8%D0%B7%D0%BB%D0%B0%D0%B9%D0%BA-%D0%BF%D0%BE%D1%81%D1%82%D0%B0---post-apipostdislike">Дизлайк поста - <code>POST /api/post/dislike</code></h2>
<p>Метод сохраняет в таблицу <code>post_votes</code> дизлайк текущего авторизованного пользователя. В случае повторного дизлайка возвращает <code>{result: false}</code>.</p>
<p>Если до этого этот же пользователь поставил на этот же пост лайк, этот лайк должен заменен на дизлайк в базе данных.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"post_id"</span>: <span class="hljs-number">151</span>
}
</div></code></pre>
<ul>
<li><code>post_id</code> - id поста</li>
</ul>
<p><strong>✅ Формат ответа в случае, если дизлайк произошёл:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<p><strong>❌ Формат ответа в случае, если дизлайк не произошёл:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">false</span>
}
</div></code></pre>
<h2 id="%D0%B2%D1%8B%D1%85%D0%BE%D0%B4---get-apiauthlogout">Выход - <code>GET /api/auth/logout</code></h2>
<p>Метод разлогинивает пользователя: удаляет идентификатор его сессии из списка авторизованных. Всегда возвращает <code>true</code>, даже если идентификатор текущей сессии не найден в списке авторизованных.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"result"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<h2 id="%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA---get-apisettings">Получение настроек - <code>GET /api/settings/</code></h2>
<p>Метод возвращает глобальные настройки блога из таблицы <code>global_settings</code>.</p>
<p><strong>Авторизация: не требуется</strong></p>
<p><strong>Формат ответа:</strong></p>
<pre class="hljs"><code><div>{
 	<span class="hljs-attr">"MULTIUSER_MODE"</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">"POST_PREMODERATION"</span>: <span class="hljs-literal">true</span>,
	<span class="hljs-attr">"STATISTICS_IS_PUBLIC"</span>: <span class="hljs-literal">true</span>
}
</div></code></pre>
<h2 id="%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA---put-apisettings">Сохранение настроек - <code>PUT /api/settings/</code></h2>
<p>Метод записывает глобальные настройки блога в таблицу <code>global_settings</code>,
если запрашивающий пользователь авторизован и является модератором.</p>
<p><strong>❗️Авторизация: требуется</strong></p>
<p><strong>Запрос:</strong></p>
<pre class="hljs"><code><div>{
 	<span class="hljs-attr">"MULTIUSER_MODE"</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">"POST_PREMODERATION"</span>: <span class="hljs-literal">true</span>,
	<span class="hljs-attr">"STATISTICS_IS_PUBLIC"</span>: <span class="hljs-literal">false</span>
}
</div></code></pre>
<h1 id="%D0%B3%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0">Глобальные настройки блога</h1>
<p><strong>MULTIUSER_MODE</strong> — если включен этот режим, в блоге разрешена регистрация новых пользователей. Если режим выключен, регистрация пользователей не доступна, на фронте на месте ссылки на страницу регистрации появляется текст <code>Регистрация закрыта</code>. При запросе на <code>/api/auth/register</code> необходимо возвращать статус 404 (NOT FOUND).</p>
<p><strong>POST_PREMODERATION</strong> - если включен этот режим, то все новые посты пользователей с <code>moderation = false</code> обязательно должны попадать на модерацию, у постов при создании должен быть установлен <code>moderation_status = NEW</code>.
Eсли значения <code>POST_PREMODERATION = false</code> (режим премодерации выключен), то все новые посты должны сразу публиковаться (если у них установлен параметр <code>active = 1</code>), у постов при создании должен быть установлен <code>moderation_status = ACCEPTED</code>.</p>
<p><strong>STATISTICS_IS_PUBLIC</strong> - если включен этот режим, статистика блога должна быть доступна по запросу <code>GET /api/statistics/all</code> для всех групп пользователей. Если режим выключен, по запросу <code>GET /api/statistics/all</code> только модераторам отдавать данные статистики. Пользователям и гостям блога необходимо возвращать статус 401.</p>
<h1 id="%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81-%D0%BA%D0%BE%D0%B4%D1%8B-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%BE%D0%B2">Статус коды ответов</h1>
<ul>
<li><strong>Если пользователь не авторизован</strong> при запросе требующего авторизации, возвращайте код 401</li>
<li><strong>Если при запросе данные (пост, комментарий и прочего) не найдены</strong> - 404</li>
<li><strong>При возврате ответа включающий {result:false}</strong> возвращайте код 200</li>
</ul>
<h1 id="%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81-%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2-%D1%84%D1%80%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D0%B4%D0%BE%D0%BC">Обработка статус кодов фронтендом</h1>
<ul>
<li><strong>Страница не существует</strong> - пустой ответ с кодом <strong>404 (Not found)</strong>
На frontend должна показываться заставка &quot;Запрошенная вами страница была скрыта или не существует&quot;</li>
<li><strong>Пользователь не авторизован</strong> - пустой ответ с кодом <strong>401 (Unauthorized)</strong>
На frontend будет происходить переадресация на главную страницу в неавторизованном состоянии</li>
<li><strong>Неверный параметр на входе</strong> - ответ с кодом <strong>400 (Bad request)</strong> и сообщением (объект с ключом &quot;message&quot;)
На frontend будет выводиться alert с текстом сообщения, переданным в ответе сервера в параметре &quot;message&quot;</li>
<li><strong>Ошибка на сервере</strong> - пустой ответ с кодом <strong>500 (Internal Server Error)</strong>
На frontend будет выводиться alert с текстом: &quot;Произошла ошибка! Пожалуйста, попробуйте позже или обратитесь к администратору&quot;</li>
</ul>

</body>
</html>
